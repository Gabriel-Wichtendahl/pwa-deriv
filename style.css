:root{
  --bg-main:#020617;
  --bg-card:rgba(2,6,23,.78);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --border:rgba(148,163,184,.22);
  --neon-cyan:#22d3ee;
  --neon-green:#22c55e;
  --neon-red:#ef4444;
  --neon-purple:#a855f7;
  --neon-orange:#fb923c;
  --btn-bg:rgba(15,23,42,.78);
  --btn-text:#e5e7eb;
}
body.light{
  --bg-main:#f8fafc;
  --bg-card:rgba(255,255,255,.92);
  --text:#0f172a;
  --muted:#475569;
  --border:rgba(15,23,42,.18);
  --btn-bg:rgba(226,232,240,.95);
  --btn-text:#0f172a;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text);
  background:var(--bg-main);
  padding:10px;
  min-height:100vh;
  overflow-x:hidden;
}
.bgNeon{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(34,211,238,.18), transparent 45%),
    radial-gradient(circle at 80% 20%, rgba(168,85,247,.16), transparent 50%),
    radial-gradient(circle at 50% 80%, rgba(34,197,94,.10), transparent 55%),
    linear-gradient(180deg, rgba(2,6,23,.65), rgba(2,6,23,.88)),
    url("./bg-neon.png");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  image-rendering:-webkit-optimize-contrast;
  transform:translateZ(0);
}
body.light .bgNeon{display:none}
.header,.main{position:relative;z-index:1}
.status{margin:0 0 8px;font-weight:650;letter-spacing:.4px}
.h3{margin:14px 0 8px;color:var(--muted)}
.topStatus{display:flex;gap:8px;margin-bottom:10px}
.pill{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 12px;
  font-size:13px;
  backdrop-filter:blur(12px);
}
.controls{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-bottom:10px;
  align-items:center;
}
.btn,button{
  background:var(--btn-bg);
  color:var(--btn-text);
  border:1px solid var(--border);
  border-radius:12px;
  padding:7px 12px;
  font-size:14px;
  cursor:pointer;
  backdrop-filter:blur(12px);
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease, opacity .15s ease;
}
.btn:hover,button:hover{transform:translateY(-1px);box-shadow:0 0 14px rgba(34,211,238,.22)}
.btn:active,button:active{transform:translateY(0)}
.btn.active,button.active{border-color:var(--neon-cyan);box-shadow:0 0 14px rgba(34,211,238,.55)}
.btnDanger{border-color:rgba(239,68,68,.5)}
.btnDanger:hover{box-shadow:0 0 14px rgba(239,68,68,.25)}
.btnGhost{opacity:.95}
.btnPrimary{border-color:rgba(34,211,238,.55);box-shadow:0 0 14px rgba(34,211,238,.35)}
.btnIcon{
  width:40px;height:40px;border-radius:12px;padding:0;
  display:grid;place-items:center;
}
#wakeBtn.active{border-color:var(--neon-green);box-shadow:0 0 14px rgba(34,197,94,.55)}
.btnGroup{display:flex;gap:6px}
.evalBtn{font-size:13px;opacity:.75}
.evalBtn.active{opacity:1;border-color:var(--neon-cyan);box-shadow:0 0 14px rgba(34,211,238,.55)}
.modeBtn{font-weight:650}
.modeBtn.active-strong{border-color:var(--neon-orange);box-shadow:0 0 14px rgba(251,146,60,.55);color:#fdba74}

.counter{margin:8px 0;font-size:14px;color:var(--muted)}

.signals{display:flex;flex-direction:column;gap:8px}
.row{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:10px;
  backdrop-filter:blur(16px);
}
.row-main{display:flex;align-items:center;gap:8px}
.row-text{flex:1;cursor:pointer;user-select:none}
.row-text:hover{text-decoration:underline}

.chartBtn{
  width:38px;height:38px;border-radius:12px;
  display:grid;place-items:center;padding:0;
}
.chartBtn svg{width:20px;height:20px}

/* üîí YA NO USAMOS :disabled PARA EL CANDADO (para que no desaparezca en Android) */
.chartBtn.locked{
  cursor:not-allowed;
  opacity:.95;
  border-color:rgba(168,85,247,.22);
  box-shadow:0 0 16px rgba(168,85,247,.12);
}
.chartBtn.locked:hover{transform:none; box-shadow:0 0 16px rgba(168,85,247,.18)}
.chartBtn.locked .lockPulse{
  animation: lockPulse 1.35s ease-in-out infinite;
}

.lockBadge{font-size:18px}

.nextArrow{font-size:18px;width:28px;text-align:center}
.nextArrow.up{color:var(--neon-green); animation: arrowIn .18s ease-out}
.nextArrow.down{color:var(--neon-red); animation: arrowIn .18s ease-out}
.nextArrow.flat{color:var(--muted); animation: arrowIn .18s ease-out}
.nextArrow.pending{color:var(--muted)}

@keyframes arrowIn{
  from{ transform:translateY(2px); opacity:.35 }
  to{ transform:translateY(0); opacity:1 }
}

.row-actions{display:flex;gap:6px;margin-top:8px;align-items:center}
.row-actions button{padding:6px 10px;border-radius:12px}
.row-comment{
  flex:1;background:transparent;color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  padding:7px 10px;
}

textarea{
  width:100%;
  background:var(--bg-card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px;
  backdrop-filter:blur(16px);
}

.modal.hidden{display:none}
.modalBackdrop{
  position:fixed;inset:0;z-index:20;
  background:rgba(0,0,0,.62);
}
.modalCard{
  position:fixed;inset:8%;z-index:21;
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:12px;
  display:flex;
  flex-direction:column;
  backdrop-filter:blur(18px);
}
.modalHeader{display:flex;justify-content:space-between;align-items:center;gap:10px}
.modalTitle{font-weight:700}
.modalSub{font-size:13px;color:var(--muted);margin-top:2px}
#minuteCanvas{
  flex:1;width:100%;height:100%;min-height:220px;
  margin:10px 0;border-radius:14px;border:1px solid var(--border);
}
.modalFooter{display:flex;justify-content:flex-end;gap:8px}
@media (max-width:480px){.modalCard{inset:6%}}

/* ‚úÖ √çcono cuando la flecha coincide con la se√±al */
.hitIcon{
  width:26px;
  height:26px;
  display:inline-grid;
  place-items:center;

  border-radius:999px;
  border:1px solid rgba(34,197,94,.55);
  background:rgba(34,197,94,.14);

  box-shadow:0 0 16px rgba(34,197,94,.35);
  color:#bbf7d0;

  font-size:14px;
  font-weight:800;
  line-height:1;

  transform:scale(1);
}
.hitIcon.hidden{ display:none; }

.hitIcon.pop{
  animation: hitPop .22s ease-out;
}
@keyframes hitPop{
  from{ transform:scale(.75); opacity:.45 }
  to{ transform:scale(1); opacity:1 }
}

@keyframes lockPulse{
  0%{ transform:scale(1); opacity:1 }
  50%{ transform:scale(1.07); opacity:.78 }
  100%{ transform:scale(1); opacity:1 }
}