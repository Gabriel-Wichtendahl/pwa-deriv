:root{
  --bg-main:#020617;
  --bg-card:rgba(2,6,23,.78);
  --text:#e5e7eb;
  --muted:#94a3b8;
  --border:rgba(148,163,184,.22);

  --neon-cyan:#22d3ee;
  --neon-green:#22c55e;
  --neon-red:#ef4444;
  --neon-purple:#a855f7;
  --neon-orange:#fb923c;

  --btn-bg:rgba(15,23,42,.78);
  --btn-text:#e5e7eb;

  --shadow:0 18px 45px rgba(0,0,0,.35);
  --shadow-soft:0 10px 25px rgba(0,0,0,.22);

  --radius:18px;
}

body.light{
  --bg-main:#f8fafc;
  --bg-card:rgba(255,255,255,.92);
  --text:#0f172a;
  --muted:#475569;
  --border:rgba(15,23,42,.14);

  --btn-bg:rgba(226,232,240,.95);
  --btn-text:#0f172a;
}

/* base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text);
  background:var(--bg-main);
  padding:10px;
  min-height:100vh;
  overflow-x:hidden;
}

/* ✅ modo claro con fondo suave (en vez de blanco plano) */
body.light{
  background:
    radial-gradient(circle at 20% 10%, rgba(34,211,238,.10), transparent 45%),
    radial-gradient(circle at 80% 20%, rgba(168,85,247,.08), transparent 50%),
    radial-gradient(circle at 50% 85%, rgba(34,197,94,.06), transparent 55%),
    linear-gradient(180deg, #f8fafc, #eef2ff);
}

/* fondo neon fijo */
.bgNeon{
  position:fixed; inset:0; z-index:0; pointer-events:none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(34,211,238,0.18), transparent 45%),
    radial-gradient(circle at 80% 20%, rgba(168,85,247,0.16), transparent 50%),
    radial-gradient(circle at 50% 80%, rgba(34,197,94,0.10), transparent 55%),
    linear-gradient(180deg, rgba(2,6,23,0.62), rgba(2,6,23,0.90)),
    url("./bg-neon.png");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  image-rendering:-webkit-optimize-contrast;
  transform:translateZ(0);
}
body.light .bgNeon{display:none}

/* layout */
.header,.main{position:relative; z-index:1}

/* header sticky */
.header{
  position:sticky; top:0; z-index:5;
  padding:10px 10px 12px;
  margin:-10px -10px 10px;
  background:linear-gradient(180deg, rgba(2,6,23,.78), rgba(2,6,23,.55));
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(148,163,184,.18);
}
body.light .header{
  background:linear-gradient(180deg, rgba(248,250,252,.85), rgba(248,250,252,.70));
}

.headerTop{display:flex; flex-direction:column; gap:10px}
.headerBottom{display:flex; align-items:baseline; justify-content:space-between; gap:10px; flex-wrap:wrap}
.hint{font-size:12px; color:var(--muted); opacity:.95}

.status{margin:0; font-weight:750; letter-spacing:.35px}
.h3{margin:14px 0 8px; color:var(--muted)}

/* pills */
.topStatus{display:flex; gap:8px; margin:0}
.pill{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 12px;
  font-size:13px;
  backdrop-filter:blur(14px);
  box-shadow:var(--shadow-soft);
}

/* countdown urgencia */
#countdown.urgent{
  border-color:rgba(239,68,68,.35);
  box-shadow:0 0 0 1px rgba(239,68,68,.20), 0 0 18px rgba(239,68,68,.22);
  animation:pulse 1s ease-in-out infinite;
}
@keyframes pulse{0%,100%{transform:translateY(0)}50%{transform:translateY(-1px)}}

/* controles */
.controls{display:flex; flex-direction:column; gap:8px; margin-top:8px}
.controlsRow{display:flex; flex-wrap:wrap; gap:6px; align-items:center}
.controlsRow2{justify-content:space-between}

/* botones */
.btn,button{
  background:var(--btn-bg);
  color:var(--btn-text);
  border:1px solid var(--border);
  border-radius:14px;
  padding:7px 12px;
  font-size:14px;
  cursor:pointer;
  backdrop-filter:blur(14px);
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease, opacity .12s ease;
}
.btn:hover,button:hover{transform:translateY(-1px); box-shadow:0 0 18px rgba(34,211,238,.18)}
.btn:active,button:active{transform:translateY(0)}
.btn.active,button.active{
  border-color:var(--neon-cyan);
  box-shadow:0 0 0 1px rgba(34,211,238,.20), 0 0 18px rgba(34,211,238,.35);
}

.btnDanger{border-color:rgba(239,68,68,.45)}
.btnDanger:hover{box-shadow:0 0 18px rgba(239,68,68,.20)}
.btnGhost{opacity:.95}
.btnPrimary{border-color:rgba(34,211,238,.55); box-shadow:0 0 18px rgba(34,211,238,.22)}
.btnIcon{
  width:40px; height:40px;
  border-radius:14px;
  padding:0;
  display:grid;
  place-items:center;
}

/* ✅ vaciar icon (chico) */
.btnIconSm{
  width:40px;
  height:40px;
  padding:0;
  border-radius:14px;
  display:grid;
  place-items:center;
  font-size:18px;
  line-height:1;
}

/* wake */
#wakeBtn.active{
  border-color:rgba(34,197,94,.55);
  box-shadow:0 0 0 1px rgba(34,197,94,.18), 0 0 18px rgba(34,197,94,.25);
}

/* ✅ Tabs (segmented control) */
.tabs{
  display:flex;
  gap:0;
  border:1px solid var(--border);
  background:rgba(2,6,23,.25);
  border-radius:14px;
  overflow:hidden;
  backdrop-filter:blur(14px);
}
body.light .tabs{background:rgba(226,232,240,.55)}
.tab{
  border:0;
  border-right:1px solid var(--border);
  border-radius:0;
  padding:8px 12px;
  font-size:13px;
  opacity:.78;
  background:transparent;
  box-shadow:none !important;
}
.tab:last-child{border-right:0}
.tab:hover{transform:none; opacity:1}
.tab.active{
  opacity:1;
  background:rgba(34,211,238,.14);
  border-color:rgba(34,211,238,.35);
}
body.light .tab.active{background:rgba(34,211,238,.18)}

/* modo */
.modeBtn{font-weight:750}
.modeBtn.active-strong{
  border-color:rgba(251,146,60,.75);
  box-shadow:0 0 0 1px rgba(251,146,60,.18), 0 0 18px rgba(251,146,60,.30);
  color:#fdba74;
}

/* contador */
.counter{margin:0; font-size:14px; color:var(--muted)}

/* señales */
.signals{display:flex; flex-direction:column; gap:10px; padding-top:2px}

.row{
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:10px;
  backdrop-filter:blur(18px);
  box-shadow:var(--shadow-soft);
  position:relative;
}
.row.isNew{animation:pop .28s ease-out}
@keyframes pop{from{transform:translateY(4px); opacity:.35}to{transform:translateY(0); opacity:1}}

.row-main{display:flex; align-items:center; gap:8px}
.row-left{flex:1; display:flex; flex-wrap:wrap; gap:6px; align-items:center}

.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(2,6,23,.35);
  font-size:13px;
  user-select:none;
}
body.light .badge{background:rgba(226,232,240,.55)}
.badgeSymbol{border-color:rgba(34,211,238,.22)}
.badgeMode{border-color:rgba(168,85,247,.22)}
.badgeTime{opacity:.9}
.badgeDirBuy{border-color:rgba(34,197,94,.35)}
.badgeDirSell{border-color:rgba(239,68,68,.30)}
.row-open{cursor:pointer}
.row-open:hover{text-decoration:underline}

.chartBtn{
  width:40px; height:40px;
  border-radius:14px;
  display:grid; place-items:center;
  padding:0;
}
.chartBtn svg{width:20px; height:20px}
.chartBtn:disabled{opacity:.45; cursor:not-allowed; box-shadow:none}
.lockBadge{font-size:18px}

.nextArrow{font-size:18px; width:28px; text-align:center}
.nextArrow.up{color:var(--neon-green)}
.nextArrow.down{color:var(--neon-red)}
.nextArrow.flat,.nextArrow.pending{color:var(--muted)}

/* acciones */
.row-actions{display:flex; gap:8px; margin-top:10px; align-items:center}
.row-actions button{padding:7px 10px; border-radius:999px}
.row-comment{
  flex:1;
  background:transparent;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:14px;
  padding:8px 10px;
}

/* feedback */
textarea{
  width:100%;
  background:var(--bg-card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:16px;
  padding:10px;
  backdrop-filter:blur(18px);
  box-shadow:var(--shadow-soft);
}

/* modal */
.modal.hidden{display:none}
.modalBackdrop{position:fixed; inset:0; z-index:20; background:rgba(0,0,0,.62)}
.modalCard{
  position:fixed; inset:8%;
  z-index:21;
  background:var(--bg-card);
  border:1px solid var(--border);
  border-radius:22px;
  padding:12px;
  display:flex;
  flex-direction:column;
  backdrop-filter:blur(22px);
  box-shadow:var(--shadow);
}
.modalHeader{display:flex; justify-content:space-between; align-items:center; gap:10px}
.modalTitle{font-weight:800}
.modalSub{font-size:13px; color:var(--muted); margin-top:2px}

#minuteCanvas{
  flex:1;
  width:100%;
  height:100%;
  min-height:240px;
  margin:10px 0;
  border-radius:16px;
  border:1px solid var(--border);
  background:rgba(2,6,23,.12);
}
.modalFooter{display:flex; justify-content:flex-end; gap:8px}

/* mobile */
@media (max-width:480px){
  .modalCard{inset:6%}
  .controlsRow2{gap:8px}
  .hint{flex-basis:100%}
}